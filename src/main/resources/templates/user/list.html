<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{common/head :: head_fragment(title = 'ユーザー情報一覧', scripts = ~{::script}, links = ~{::link})}"></head>

<body>
<div class="container">
  <h1>ユーザー情報一覧</h1>
  <div class="float-end">
    <a th:href="@{/user/add}" class="btn btn-primary">新規登録はこちら</a>
  </div>

  <form th:action="@{/user/list}" method="get" th:object="${searchForm}" class="mb-4">
    <div class="row mb-2">
      <div class="col-md-2">
        <label>ID</label>
        <input type="text" th:field="*{id}" class="form-control" />
      </div>
      <div class="col-md-4">
        <label>名前</label>
        <input type="text" th:field="*{name}" class="form-control" />
      </div>
      <div class="col-md-3">
        <label>住所</label>
        <input type="text" th:field="*{address}" class="form-control" />
      </div>
      <div class="col-md-3">
        <label>電話番号</label>
        <input type="text" th:field="*{phone}" class="form-control" />
      </div>

      <div class="col-md-2 align-self-end">
        <button type="submit" class="btn btn-primary">検索</button>
      </div>
    </div>
  </form>

  <table class="table table-striped">
    <thead>
    <tr>
      <th>ID</th>
      <th>名前</th>
      <th>住所</th>
      <th>電話番号</th>
      <th>更新日時</th>
      <th>登録日時</th>
      <th>削除日時</th>
      <th></th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="user : ${userlist}"
        th:object="${user}"
        th:classappend="*{deleteDate} != null ? 'table-secondary text-muted' : ''"
        class="align-middle">

      <td th:text="*{id}"></td>
      <td th:text="*{name}"></td>
      <td th:text="*{address}"></td>
      <td th:text="*{phone}"></td>
      <td th:text="${#dates.format(user.updateDate, 'yyyy/MM/dd')}"></td>
      <td th:text="${#dates.format(user.createDate, 'yyyy/MM/dd')}"></td>

      <!-- 削除日時 -->
      <td th:text="*{deleteDate != null} ? ${#dates.format(user.deleteDate, 'yyyy/MM/dd')} : '-'"></td>


      <!-- 操作列 -->
      <td>
        <a th:href="@{/user/{id}(id=*{id})}" class="btn btn-secondary">詳細</a>
        <a th:if="*{deleteDate == null}" th:href="@{/user/{id}/delete(id=*{id})}" class="btn btn-danger">削除</a>
      </td>
    </tr>

    </tbody>
  </table>
</div>
</body>
</html>
